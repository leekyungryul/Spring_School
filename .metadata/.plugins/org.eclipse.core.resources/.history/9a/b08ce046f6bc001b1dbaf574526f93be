package com.google.lkr;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.Statement;

import org.sqlite.SQLiteConfig;

public class UserDB {
	public void createTable() {
		try {
//			db open
			Class.forName("org.sqlite.JDBC");
			SQLiteConfig config = new SQLiteConfig();
			Connection connection = DriverManager.getConnection("jdbc:sqlite:/" + "c:/tomcat/user.db", config.toProperties());
//			use
//			쿼리문 실행
//			primary 키 잡는방법 확인
//			"CREATE TABLE " + this.tableName + "(" + query + ");";
			String query = "CREATE TABLE student(idx INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT, middleScore REAL, finalScore REAL, now TEXT)";
//			sqlite는 정수는 integer, 실수는 real, 문자열은 text
			Statement statement = connection.createStatement();
			int result = statement.executeUpdate(query);
			statement.close();
//			close
			connection.close();
		} catch(Exception e) {
			
		}
	}
	
	public void insertAction(String name, double middleScore, double finalScore) {
		try {
//			db open
			Class.forName("org.sqlite.JDBC");
			SQLiteConfig config = new SQLiteConfig();
			Connection connection = DriverManager.getConnection("jdbc:sqlite:/" + "c:/tomcat/user.db", config.toProperties());
//			use
//			쿼리문 실행
//			자바에서 날짜만들어서 시간정보 넣어도 되고 db에서 제공하는 날짜함수 사용해도 된다.
//			아래는 날짜함수 사용
			String query = "INSERT INTO student (name, middleScore, finalScore, now) VALUES('"
					+ name + "'," + middleScore + ", " +finalScore + ", date('now'))";
//			sqlite는 정수는 integer, 실수는 real, 문자열은 text
			Statement statement = connection.createStatement();
			int result = statement.executeUpdate(query);
			statement.close();
//			close
			connection.close();
		} catch(Exception e) {
			
		}
	}
	
}
